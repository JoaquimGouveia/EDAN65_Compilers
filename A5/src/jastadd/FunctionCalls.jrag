import java.util.*;

aspect FunctionCalls {

    coll Set<FuncDecl> FuncDecl.functionCalls() [new HashSet<FuncDecl>()] with add root FuncDecl;

    inh FuncDecl FunctionCall.enclosingFunction();
    eq FuncDecl.getChild().enclosingFunction() = this;

}

aspect FunctionCallsContributions {
    FunctionCall contributes getIdUse().decl().function()
        to FuncDecl.functionCalls() for enclosingFunction();
}